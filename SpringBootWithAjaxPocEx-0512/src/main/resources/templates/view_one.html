<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>welcome to all employee page</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" />
	<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
</head>

<body>
	<div class="container">
		<div class="card">
			<div class="card-header bg-info text-white text-center">
				<h2>SEARCH EMPLOYEE BY ID</h2>
			</div>
			<div class="card-body">
				<table class="table table-hover text-center">
					<tr>
						<td><input type='text' name='empId' id='empId' required> &nbsp; &nbsp; | &nbsp; &nbsp;
							<button type="button" class='btn btn-warning' onclick="getOneEmp()"
								id="searchBtn">SEARCH</button> </td>
					</tr>
					<tr>
						<td>
							<span id="idNotFound"></span>
						</td>
					</tr>
				</table>
				<div th:if="${oneEmp}!=null">
					<table class="table table-hover text-center">
						<tr class="bg-info text-white">
							<th>ID</th>
							<th>NAME</th>
							<th>EMAIL</th>
							<th>SAL</th>
							<th>DEPT</th>
						</tr>
						<tr>
							<td th:text="${oneEmp.empId}" />
							<td th:text="${oneEmp.empName}" />
							<td th:text="${oneEmp.empEmail}" />
							<td th:text="${oneEmp.empSal}" />
							<td th:text="${oneEmp.empDept}" />
						</tr>
					</table>
				</div>
			</div>
			<div class="card-footer text-center text-white bg-primary">
				<h3>ALL RIGHTS RESERVED @2O23</h3>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		function getOneEmp() {
			console.log("inside ajax call");
			$.ajax({
				url: 'getOne',
				data: {'empId': $("#empId").val()},
				success: function (respText) {
					if (respText != '') {
						$('#idNotFound').text(respText.text);
						$("#empId").text('');
					}
					else {
						$('#idNotFound').text('');
					}
				}
			});
		}
	</script>
</body>

</html>